{"version":3,"file":"tiny-popup-menu.min.js","sources":["../node_modules/tiny-emitter/index.js","../src/@enums.ts","../src/myPragma.ts","../src/defaults.ts","../src/tiny-popup-menu.tsx","../src/index-umd.ts"],"sourcesContent":["function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","/**\n * Available menu positions\n */\nexport var Position;\n(function (Position) {\n    Position[\"Top\"] = \"top\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nexport var SubmenuPosition;\n(function (SubmenuPosition) {\n    SubmenuPosition[\"Left\"] = \"left\";\n    SubmenuPosition[\"Right\"] = \"right\";\n})(SubmenuPosition || (SubmenuPosition = {}));\n//# sourceMappingURL=@enums.js.map","export default function createElement(tagName, attrs = {}, ...children) {\n    if (typeof tagName === 'function')\n        return tagName(attrs, children);\n    const elem = tagName === null\n        ? new DocumentFragment()\n        : document.createElement(tagName);\n    Object.entries(attrs || {}).forEach(([name, value]) => {\n        if (typeof value !== undefined &&\n            value !== null &&\n            value !== undefined) {\n            if (name.startsWith('on') && name.toLowerCase() in window)\n                elem.addEventListener(name.toLowerCase().substr(2), value);\n            else {\n                if (name === 'className')\n                    elem.setAttribute('class', value.toString());\n                else if (name === 'htmlFor')\n                    elem.setAttribute('for', value.toString());\n                else\n                    elem.setAttribute(name, value.toString());\n            }\n        }\n    });\n    for (const child of children) {\n        if (!child)\n            continue;\n        if (Array.isArray(child))\n            elem.append(...child);\n        else {\n            if (child.nodeType === undefined)\n                elem.innerHTML += child;\n            else\n                elem.appendChild(child);\n        }\n    }\n    return elem;\n}\n//# sourceMappingURL=myPragma.js.map","import { Position } from './@enums.js';\nexport const defaultOptions = {\n    position: Position.Bottom,\n    className: '',\n    autoClose: true,\n    arrow: true,\n    margin: undefined,\n    offset: {\n        x: 0,\n        y: 0\n    },\n    menuItems: [],\n    stopClick: true\n};\n//# sourceMappingURL=defaults.js.map","import { TinyEmitter } from 'tiny-emitter';\nimport myPragma from './myPragma';\nimport './assets/scss/tiny-popup-menu.scss';\nimport { defaultOptions } from './defaults.js';\nimport { Position, SubmenuPosition } from './@enums.js';\nimport arrowLeft from './assets/svg/arrow_left.svg';\nimport arrowRight from './assets/svg/arrow_right.svg';\nconst ID = 'popup-menu';\nconst CLASS_CONTAINER = ID + '--container';\nconst CLASS_OPEN = ID + '--active';\nconst CLASS_SHOW_ARROW = ID + '--show-arrow';\nconst CLASS_SHOW_ARROW_TOP = ID + '--show-arrow-top';\nconst CLASS_SHOW_ARROW_BOTTOM = ID + '--show-arrow-bottom';\nconst CLASS_ITEM = ID + '--item';\nconst CLASS_ITEM_CLICKLEABLE = ID + '--item-clickleable';\nconst CLASS_SUBMENU = ID + '--submenu';\nconst CLASS_SUBMENU_ARROW = ID + '--submenu-arrow';\nconst CLASS_SUBMENU_CONTENT = ID + '--submenu-content';\nconst CLASS_ITEM_SEPARATOR = ID + '--item-separator';\n// Count the running instances to add a unique id at each one\nlet instances = 1;\n/**\n *\n * @param target\n * @param sources\n * @returns\n */\nconst deepObjectAssign = (target, ...sources) => {\n    sources.forEach((source) => {\n        Object.keys(source).forEach((key) => {\n            const s_val = source[key];\n            const t_val = target[key];\n            target[key] =\n                t_val &&\n                    s_val &&\n                    typeof t_val === 'object' &&\n                    typeof s_val === 'object' &&\n                    !Array.isArray(t_val) // Don't merge arrays\n                    ? deepObjectAssign(t_val, s_val)\n                    : s_val;\n        });\n    });\n    return target;\n};\n/**\n * Tiny vanilla javascript library to display popup menus next to button togglers.\n *\n * The popup menu uses a fixed position calculated by javascript, allowing the toggler to be inside of scrollables elements, auto adjust margins, evaluate the position (to be on top or at the bottom of the toggler), etc.\n *\n * If you want only one menu open at a time, use one instance. Instead if you want multiples menus opened at the same time, create multiples instances.\n *\n * @fires open\n * @fires close\n * @fires updateposition\n * @extends TinyEmitter\n */\nexport default class TinyPopupMenu extends TinyEmitter {\n    constructor(options = null) {\n        super();\n        this._isOpen = false;\n        this._containerMenu = myPragma(\"div\", { id: `${ID}-${instances}` });\n        this._instanceOptions = options;\n        instances++;\n    }\n    /**\n     * Open Menu\n     * @fires open\n     * @param options\n     * @returns\n     */\n    open(options) {\n        this._options = this._parseOptions(options);\n        if (this.isOpen()) {\n            // clean menu items\n            this.close();\n            // if the same button is clicked, do not reopen\n            if (options.event.currentTarget === this._toggler) {\n                if (this._options.stopClick) {\n                    options.event.preventDefault();\n                    options.event.stopPropagation();\n                }\n                return;\n            }\n        }\n        const { event, menuItems, autoClose, stopClick } = this._options;\n        this._toggler = event.currentTarget;\n        let hasSubmenu = false;\n        this._menuItemsList = menuItems.map((item) => {\n            if (item === '-') {\n                return myPragma(\"span\", { className: CLASS_ITEM_SEPARATOR });\n            }\n            else if ('items' in item) {\n                hasSubmenu = true;\n                return this._processSubMenu(item, autoClose);\n            }\n            else {\n                return this._processMenuItem(item, autoClose);\n            }\n        });\n        this._isOpen = true;\n        this.updatePosition();\n        if (hasSubmenu) {\n            this._updateSubmenusPosition();\n        }\n        // delay to prevent click be fired inmediatly if `stopClick` is false\n        setTimeout(() => {\n            this.addEventListeners();\n        });\n        this.emit('open');\n        if (stopClick) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n    /**\n     * Close menu\n     *\n     * @fires close\n     */\n    close() {\n        if (!this.isOpen())\n            return;\n        this._containerMenu.innerHTML = '';\n        this._containerMenu.remove();\n        this._toggler.classList.remove(CLASS_OPEN);\n        this.removeEventListeners();\n        this._isOpen = false;\n        this.emit('close');\n    }\n    /**\n     * Update the position of an opened menu\n     *\n     * @fires updateposition\n     */\n    updatePosition(silent = true) {\n        /**\n         * Check if the default position is ok or needs to be inverted\n         */\n        const evaluatePosition = () => {\n            if (position === Position.Top) {\n                if (togglerPosition.top - menuHeight - offsetTop - margin <=\n                    0) {\n                    return Position.Bottom;\n                }\n            }\n            else if (position === Position.Bottom) {\n                if (togglerPosition.top +\n                    menuHeight +\n                    offsetTop +\n                    togglerHeight +\n                    margin >=\n                    document.documentElement.offsetHeight) {\n                    return Position.Top;\n                }\n            }\n            return position;\n        };\n        if (!this.isOpen())\n            return;\n        const { offset, className, arrow, position, margin } = this._options;\n        this._containerMenu.style.position = 'fixed';\n        this._containerMenu.className = className;\n        this._containerMenu.classList.add(ID);\n        if (arrow) {\n            this._containerMenu.classList.add(CLASS_SHOW_ARROW);\n        }\n        this._containerMenu.innerHTML = '';\n        this._containerMenu.append(myPragma(\"div\", { className: CLASS_CONTAINER }, ...this._menuItemsList));\n        document.body.append(this._containerMenu);\n        const togglerPosition = this._toggler.getBoundingClientRect();\n        const togglerHeight = this._toggler.offsetHeight;\n        const togglerWidth = this._toggler.offsetWidth;\n        const offsetLeft = (offset === null || offset === void 0 ? void 0 : offset.x) || 0;\n        const offsetTop = (offset === null || offset === void 0 ? void 0 : offset.y) || 0;\n        // Button height + menu height\n        const menuHeight = this._containerMenu.offsetHeight;\n        const menuWidth = this._containerMenu.offsetWidth;\n        // If menu is near a window limit, invert the direction\n        const finalPosition = evaluatePosition();\n        let compensateMenuHeight = 0;\n        switch (finalPosition) {\n            case Position.Bottom:\n                compensateMenuHeight = offsetTop + togglerHeight + margin;\n                break;\n            case Position.Top:\n                compensateMenuHeight = -menuHeight - margin;\n                break;\n        }\n        const compensateMenuWidthToCenter = -menuWidth / 2 + togglerWidth / 2;\n        const windowWidth = window.innerWidth;\n        const calcualteLeft = togglerPosition.left + offsetLeft + compensateMenuWidthToCenter;\n        let adjustX = 0;\n        // it's outside the left border\n        if (calcualteLeft < 0) {\n            adjustX = 0 - calcualteLeft + margin;\n        }\n        else if (calcualteLeft + menuWidth > windowWidth) {\n            // it's outside the right border\n            adjustX = windowWidth - (calcualteLeft + menuWidth) - margin;\n        }\n        this._containerMenu.style.left = calcualteLeft + adjustX + 'px';\n        this._containerMenu.style.top =\n            togglerPosition.top + compensateMenuHeight + 'px';\n        this._toggler.classList.add(CLASS_OPEN);\n        if (arrow) {\n            const arrowWidth = 8;\n            const extraMargin = 3;\n            if (adjustX > 0) {\n                // Prevent the arrow go outside the menu width\n                adjustX = Math.min(menuWidth / 2 - arrowWidth - extraMargin, adjustX);\n            }\n            else {\n                adjustX = Math.max(-(menuWidth / 2 - (arrowWidth + extraMargin) * 2), adjustX);\n            }\n            // displace X css arrow\n            this._containerMenu.style.setProperty('--ofx', `${adjustX + arrowWidth}px`);\n            this._evaluateArrowPosition(finalPosition);\n        }\n        if (!silent) {\n            this.emit('updateposition');\n        }\n    }\n    /**\n     * Instead of creating onclick listeners on each toggler/button,\n     * you can add these using the `addToggler` method\n     *\n     * @param el\n     * @param options\n     * @param type\n     */\n    addToggler(el, options = {}, type = 'click') {\n        if (type === 'contextmenu') {\n            el.addEventListener('contextmenu', (event) => this.open(Object.assign(Object.assign({}, options), { event })));\n        }\n        else {\n            el.addEventListener('click', (event) => this.open(Object.assign(Object.assign({}, options), { event })));\n        }\n    }\n    /**\n     * Retunrs true if the insatance has an open menu\n     *\n     * @returns\n     */\n    isOpen() {\n        return this._isOpen;\n    }\n    /**\n     * Merge default options, instance options, and single open method options\n     * @param options\n     * @returns\n     */\n    _parseOptions(options) {\n        const mergedOptions = deepObjectAssign({}, defaultOptions, this._instanceOptions || {}, options || {});\n        // if margin is not setled, add a default ones\n        if (mergedOptions.margin === undefined) {\n            mergedOptions.margin = ('arrow' in mergedOptions ? mergedOptions.arrow : true)\n                ? 10\n                : 2;\n        }\n        return mergedOptions;\n    }\n    /**\n     *\n     * @param submenu\n     * @param autoClose\n     */\n    _processSubMenu(submenu, autoClose) {\n        return (myPragma(\"div\", { className: CLASS_SUBMENU + ' ' + (submenu.className || ''), id: submenu.id, style: submenu.style, \"data-position\": submenu.position || SubmenuPosition.Right },\n            myPragma(\"span\", null, submenu.content),\n            myPragma(\"div\", { className: CLASS_SUBMENU_ARROW }),\n            myPragma(\"div\", { className: CLASS_SUBMENU_CONTENT }, submenu.items.map((item) => this._processMenuItem(item, autoClose)))));\n    }\n    /**\n     *\n     * @param item\n     * @param autoClose General configuration autoclose\n     */\n    _processMenuItem(item, autoClose) {\n        let className = CLASS_ITEM;\n        className += item.callback ? ' ' + CLASS_ITEM_CLICKLEABLE : '';\n        className += item.className ? ' ' + item.className : '';\n        return (myPragma(\"div\", { className: className, onClick: item.callback\n                ? (event) => {\n                    item.callback(event);\n                    // check if the item has a custom autoClose configuration\n                    if ('autoClose' in item) {\n                        if (item.autoClose) {\n                            this.close();\n                        }\n                    }\n                    else {\n                        if (autoClose) {\n                            this.close();\n                        }\n                    }\n                }\n                : null, id: item.id, style: item.style }, item.content));\n    }\n    /**\n     *\n     */\n    _updateSubmenusPosition() {\n        const submenus = this._containerMenu.querySelectorAll('.' + CLASS_SUBMENU);\n        submenus.forEach((submenu) => {\n            const position = submenu.dataset.position;\n            const submenuContent = submenu.querySelector('.' + CLASS_SUBMENU_CONTENT);\n            const submenuPosition = submenuContent.getBoundingClientRect();\n            const submenuWidth = submenuContent.offsetWidth;\n            /**\n             * Check if the default position is ok or needs to be inverted\n             */\n            const evaluatePosition = () => {\n                if (position === SubmenuPosition.Left) {\n                    if (submenuPosition.right - submenuWidth <= 0) {\n                        return SubmenuPosition.Right;\n                    }\n                }\n                else if (position === SubmenuPosition.Right) {\n                    if (submenuPosition.right + submenuWidth >=\n                        document.documentElement.offsetWidth) {\n                        return SubmenuPosition.Left;\n                    }\n                }\n                return position;\n            };\n            const calculatedPosition = evaluatePosition();\n            submenu.classList.add(CLASS_SUBMENU + '-' + calculatedPosition);\n            // add arrow indicator\n            const submenuArrow = submenu.querySelector('.' + CLASS_SUBMENU_ARROW);\n            submenuArrow.innerHTML = '';\n            if (calculatedPosition === SubmenuPosition.Left) {\n                submenuArrow.append(arrowLeft());\n            }\n            else if (position === SubmenuPosition.Right) {\n                submenuArrow.append(arrowRight());\n            }\n        });\n    }\n    _evaluateArrowPosition(position) {\n        let arrowPositionClass = '';\n        switch (position) {\n            case Position.Bottom:\n                arrowPositionClass = CLASS_SHOW_ARROW_TOP;\n                break;\n            case Position.Top:\n                arrowPositionClass = CLASS_SHOW_ARROW_BOTTOM;\n                break;\n        }\n        this._containerMenu.classList.add(arrowPositionClass);\n    }\n    addEventListeners() {\n        // Close if click is outside the menu\n        this._closeListener = (evt) => {\n            if (!this._containerMenu.contains(evt.target)) {\n                this.close();\n            }\n        };\n        this._resizeListener = () => {\n            if (this.isOpen()) {\n                this.updatePosition(false);\n            }\n        };\n        this._scrollListener = (evt) => {\n            if (this.isOpen() &&\n                evt.target.contains(this._toggler)) {\n                this.updatePosition(false);\n            }\n        };\n        document.addEventListener('click', this._closeListener);\n        window.addEventListener('resize', this._resizeListener);\n        window.addEventListener('scroll', this._scrollListener, true);\n    }\n    removeEventListeners() {\n        document.removeEventListener('click', this._closeListener);\n        window.removeEventListener('resize', this._resizeListener);\n        window.removeEventListener('scroll', this._scrollListener);\n    }\n}\nexport * from './@enums.js';\n/**\n * Helper function to automaticaly add a separator between an array of sections\n * @param sections\n * @returns\n */\nexport function addSeparator(sections) {\n    const separator = '-';\n    return sections.reduce((acc, val) => {\n        return acc.length ? [...acc, separator, ...val] : [...acc, ...val];\n    }, []);\n}\n//# sourceMappingURL=tiny-popup-menu.js.map","import TinyPopupMenu from './tiny-popup-menu';\nimport * as utils from './tiny-popup-menu';\nObject.assign(TinyPopupMenu, utils);\nexport default TinyPopupMenu;\n//# sourceMappingURL=index-umd.js.map"],"names":["E","prototype","on","name","callback","ctx","e","this","push","fn","once","self","listener","off","apply","arguments","_","emit","data","slice","call","evtArr","i","len","length","evts","liveEvents","tinyEmitterModule","exports","Position","SubmenuPosition","TinyEmitter","createElement","tagName","attrs","children","elem","DocumentFragment","document","Object","entries","forEach","value","undefined","startsWith","toLowerCase","window","addEventListener","substr","setAttribute","toString","child","Array","isArray","append","nodeType","innerHTML","appendChild","defaultOptions","position","Bottom","className","autoClose","arrow","margin","offset","x","y","menuItems","stopClick","ID","CLASS_CONTAINER","CLASS_OPEN","CLASS_SHOW_ARROW","CLASS_SHOW_ARROW_TOP","CLASS_SHOW_ARROW_BOTTOM","CLASS_ITEM","CLASS_ITEM_CLICKLEABLE","CLASS_SUBMENU","CLASS_SUBMENU_ARROW","CLASS_SUBMENU_CONTENT","CLASS_ITEM_SEPARATOR","instances","deepObjectAssign","target","sources","source","keys","key","s_val","t_val","TinyPopupMenu","constructor","options","super","_isOpen","_containerMenu","myPragma","id","_instanceOptions","open","_options","_parseOptions","isOpen","close","event","currentTarget","_toggler","preventDefault","stopPropagation","hasSubmenu","_menuItemsList","map","item","_processSubMenu","_processMenuItem","updatePosition","_updateSubmenusPosition","setTimeout","addEventListeners","remove","classList","removeEventListeners","silent","style","add","body","togglerPosition","getBoundingClientRect","togglerHeight","offsetHeight","togglerWidth","offsetWidth","offsetLeft","offsetTop","menuHeight","menuWidth","finalPosition","Top","top","documentElement","evaluatePosition","compensateMenuHeight","compensateMenuWidthToCenter","windowWidth","innerWidth","calcualteLeft","left","adjustX","arrowWidth","extraMargin","Math","min","max","setProperty","_evaluateArrowPosition","addToggler","el","type","assign","mergedOptions","submenu","Right","content","items","onClick","querySelectorAll","dataset","submenuContent","querySelector","submenuPosition","submenuWidth","calculatedPosition","Left","right","submenuArrow","arrowPositionClass","_closeListener","evt","contains","_resizeListener","_scrollListener","removeEventListener","sections","reduce","acc","val","utils"],"mappings":"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","x_google_ignoreList":[0]}